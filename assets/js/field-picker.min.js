(function(){var c=c||{};c.scope={};c.createTemplateTagFirstArg=function(b){return b.raw=b};c.createTemplateTagFirstArgWithRaw=function(b,d){b.raw=d;return b};c.arrayIteratorImpl=function(b){var d=0;return function(){return d<b.length?{done:!1,value:b[d++]}:{done:!0}}};c.arrayIterator=function(b){return{next:c.arrayIteratorImpl(b)}};
c.makeIterator=function(b){var d="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if(d)return d.call(b);if("number"==typeof b.length)return c.arrayIterator(b);throw Error(String(b)+" is not an iterable or ArrayLike");};c.ASSUME_ES5=!1;c.ASSUME_NO_NATIVE_MAP=!1;c.ASSUME_NO_NATIVE_SET=!1;c.SIMPLE_FROUND_POLYFILL=!1;c.ISOLATE_POLYFILLS=!1;c.FORCE_POLYFILL_PROMISE=!1;c.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
c.defineProperty=c.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,d,f){if(b==Array.prototype||b==Object.prototype)return b;b[d]=f.value;return b};c.getGlobal=function(b){b=["object"==typeof globalThis&&globalThis,b,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var d=0;d<b.length;++d){var f=b[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object");};c.global=c.getGlobal(this);
c.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");c.TRUST_ES6_POLYFILLS=!c.ISOLATE_POLYFILLS||c.IS_SYMBOL_NATIVE;c.polyfills={};c.propertyToPolyfillSymbol={};c.POLYFILL_PREFIX="$jscp$";c.polyfill=function(b,d,f,h){d&&(c.ISOLATE_POLYFILLS?c.polyfillIsolated(b,d,f,h):c.polyfillUnisolated(b,d,f,h))};
c.polyfillUnisolated=function(b,d){var f=c.global;b=b.split(".");for(var h=0;h<b.length-1;h++){var m=b[h];if(!(m in f))return;f=f[m]}b=b[b.length-1];h=f[b];d=d(h);d!=h&&null!=d&&c.defineProperty(f,b,{configurable:!0,writable:!0,value:d})};
c.polyfillIsolated=function(b,d,f){var h=b.split(".");b=1===h.length;var m=h[0];m=!b&&m in c.polyfills?c.polyfills:c.global;for(var p=0;p<h.length-1;p++){var r=h[p];if(!(r in m))return;m=m[r]}h=h[h.length-1];f=c.IS_SYMBOL_NATIVE&&"es6"===f?m[h]:null;d=d(f);null!=d&&(b?c.defineProperty(c.polyfills,h,{configurable:!0,writable:!0,value:d}):d!==f&&(void 0===c.propertyToPolyfillSymbol[h]&&(b=1E9*Math.random()>>>0,c.propertyToPolyfillSymbol[h]=c.IS_SYMBOL_NATIVE?c.global.Symbol(h):c.POLYFILL_PREFIX+b+"$"+
h),c.defineProperty(m,c.propertyToPolyfillSymbol[h],{configurable:!0,writable:!0,value:d})))};c.polyfill("Array.from",function(b){return b?b:function(d,f,h){f=null!=f?f:function(u){return u};var m=[],p="undefined"!=typeof Symbol&&Symbol.iterator&&d[Symbol.iterator];if("function"==typeof p){d=p.call(d);for(var r=0;!(p=d.next()).done;)m.push(f.call(h,p.value,r++))}else for(p=d.length,r=0;r<p;r++)m.push(f.call(h,d[r],r));return m}},"es6","es3");
c.polyfill("Object.is",function(b){return b?b:function(d,f){return d===f?0!==d||1/d===1/f:d!==d&&f!==f}},"es6","es3");c.polyfill("Array.prototype.includes",function(b){return b?b:function(d,f){var h=this;h instanceof String&&(h=String(h));var m=h.length;f=f||0;for(0>f&&(f=Math.max(f+m,0));f<m;f++){var p=h[f];if(p===d||Object.is(p,d))return!0}return!1}},"es7","es3");
c.checkStringArgs=function(b,d,f){if(null==b)throw new TypeError("The 'this' value for String.prototype."+f+" must not be null or undefined");if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+f+" must not be a regular expression");return b+""};c.polyfill("String.prototype.includes",function(b){return b?b:function(d,f){return-1!==c.checkStringArgs(this,d,"includes").indexOf(d,f||0)}},"es6","es3");
window.FieldPicker=function(b,d){function f(a){k.Options&&k.Options.updater&&"function"===typeof k.Options.updater&&k.Options.updater(k.Selected,a,k)}function h(a){var e=c.makeIterator(a).next().value,g=e.cname;e=e.code;a=a.every(function(q){return q.checked});return'\n      <div class="field-picker-row-container">\n        <div class="field-picker-title clickable">'+g+'</div>\n        <div class="field-picker-checkbox-container">\n          <label for="field-'+e+'" class="field-picker-checkbox-label field-picker-checkbox-group">\n            <input id="field-'+
e+'" type="checkbox" name="field-'+e+'" value="'+e+'" '+(a?"checked":"")+'>\n            <span class="field-checkbox-item clickable"></span>\n          </label>\n        </div>\n      </div>\n    '}function m(a){var e=a.cname,g=a.code,q=a.children;a=a.checked?"checked":"";var n='\n      <div class="field-picker-row-container">\n        <div class="field-picker-title">'+e+'</div>\n        <div class="field-picker-checkbox-container">\n          <label for="field-'+g+'" class="field-picker-checkbox-label field-picker-checkbox-group">\n            <input id="field-'+
g+'" type="checkbox" name="field-'+g+'" value="'+g+'" '+a+'>\n            <span class="field-checkbox-item clickable"></span>\n          </label>\n        </div>\n      </div>\n    ';q&&q.length&&(n=!q.every(function(l){return l.checked})&&q.some(function(l){return l.checked}),n='\n        <div class="field-picker-row-container">\n          <div class="field-picker-menu-group">\n            <div class="field-picker-sign clickable">+</div>\n            <div class="field-picker-title clickable">'+e+
'</div>\n          </div>\n          <div class="field-picker-checkbox-container">\n            <label for="field-'+g+'" class="field-picker-checkbox-label field-picker-checkbox-group">\n              <input id="field-'+g+'" type="checkbox" name="field-'+g+'" value="'+g+'" '+a+'>\n              <span class="field-checkbox-item clickable '+(n?"is-indeterminate":"")+'"></span>\n            </label>\n          </div>\n        </div>\n        '+p(q)+"\n      ");return'\n      <div class="field-picker-item-group">\n        '+
n+"\n      </div>\n    "}function p(a){return a&&a.length?'\n      <div class="field-picker-children-group field-picker-groups hide">\n        '+a.map(function(e){return m(e)}).join("")+"\n      </div>\n    ":""}function r(a,e){e='\n      <div id="'+e+'" class="field-picker-container no-select">\n        <div class="field-picker-item-group">\n          '+h(k.Fields.RootField)+'\n          <div class="field-picker-children-group field-picker-top-groups">\n            '+k.Fields.MainField.map(function(g){return m(g)}).join("")+
"\n          </div>\n        </div>\n      </div>\n    ";document.querySelector(a).innerHTML=e}function u(){var a=document.getElementById(k.ComponentId);a=Array.from(a.querySelectorAll(".field-picker-checkbox-label input[type=checkbox]"));a.forEach(function(e){w(e)});k.Selected=a.map(function(e){return e.checked?e.value:null}).filter(function(e){return e});f("change")}function A(){document.getElementById(k.ComponentId).addEventListener("click",function(a){if(a=a.target.closest(".field-picker-checkbox-label input[type=checkbox]"))"field-all"==
a.value?x(a,!0):x(a),u()},!1)}function w(a){var e=document.getElementById(k.ComponentId),g=e.querySelectorAll(".field-picker-top-groups > .field-picker-item-group"),q=a.closest(".field-picker-item-group");Array.from(g).forEach(function(l){if(l==q){var t=l.querySelector(".field-checkbox-item"),y=Array.from(l.querySelectorAll(".field-picker-groups input[type=checkbox]"));l=Array.from(l.querySelectorAll(".field-picker-groups input[type=checkbox]:checked"));var C=y.filter(function(B){return k.Skips.includes(B.value)}).length;
if(l.length){var z=t.closest(".field-picker-checkbox-group").querySelector("input[type=checkbox]");z.checked=!1;y.length<=l.length+C?(t.classList.remove("is-indeterminate"),t.classList.add("checked"),z.checked=!0):(0<l.length?t.classList.add("is-indeterminate"):t.classList.remove("is-indeterminate"),t.classList.remove("checked"))}}});a=e.querySelectorAll(".field-picker-top-groups > .field-picker-item-group > .field-picker-row-container input[type=checkbox]:checked");e=document.querySelector(".field-picker-item-group #field-all");
var n=e.closest(".field-picker-checkbox-group").querySelector(".field-checkbox-item");e.checked=!1;a.length==g.length?(n.classList.remove("is-indeterminate"),n.classList.add("checked"),e.checked=!0):1<a.length?(n.classList.remove("checked"),n.classList.add("is-indeterminate")):(n.classList.remove("checked"),n.classList.remove("is-indeterminate"))}function x(a){var e=a.checked,g=a.closest(".field-picker-item-group").querySelector(".field-picker-children-group");D(g,e);w(a)}function D(a,e){a&&a.querySelectorAll("input[type=checkbox]").forEach(function(g){k.Skips.includes(g.value)||
(g.checked=e)})}function v(a,e){if(a){var g=a.closest(".field-picker-item-group").querySelector(".field-picker-children-group");"string"===typeof e?"expand"===e?(g.classList.remove("hide"),a.textContent="-"):"collapse"===e&&(g.classList.add("hide"),a.textContent="+"):g.classList.contains("hide")?(g.classList.remove("hide"),a.textContent="-"):(g.classList.add("hide"),a.textContent="+")}}function E(){document.getElementById(k.ComponentId).addEventListener("click",function(a){a=a.target.closest(".field-picker-sign");
v(a)})}function F(){document.getElementById(k.ComponentId).addEventListener("click",function(a){if(a.target.closest(".field-picker-title")){var e=a.target.closest(".field-picker-menu-group");e?(a=e.querySelector(".field-picker-sign"))&&v(a):(a=a.target.closest(".field-picker-item-group").querySelector(".field-picker-children-group").querySelectorAll(".field-picker-sign"),Array.from(a).map(function(g){return"-"==g.innerHTML.trim()}).filter(function(g){return g}).length!==a.length?a.forEach(function(g){v(g,
"expand")}):a.forEach(function(g){v(g)}))}})}var k={ComponentId:"",Options:{},Selected:[],Fields:{RootField:{},MainField:[],States:{}},Skips:[],GetSelected:function(){return this.Selected},Show:function(){var a=document.getElementById(k.ComponentId);a.className=a.className.replace(/\s?hide/g,"")},Hide:function(){var a=document.getElementById(k.ComponentId);a.className+=" hide";f("submit")}};return function(a,e){var g="field-picker-"+Math.random().toString(36).slice(-6);k.ComponentId=g;k.Options=e;
var q=e.data,n=e.preselected;e=e.skips;k.Fields.RootField=[q[0]];k.Fields.MainField=q.slice(1);q=q.map(function(l){return l.children&&l.children.length?l.children.filter(function(t){return t.checked}):!1}).filter(function(l){return l}).reduce(function(l,t){return l.concat(t)},[]).map(function(l){return l.code});k.Selected=q;n&&("string"===typeof n?"all"===n?k.Selected=k.Fields.MainField.map(function(l){return l.code}).concat(k.Fields.RootField.map(function(l){return l.code})):k.Selected.includes(n)||
(k.Selected=k.Selected.concat(n)):n&&n.length&&n.forEach(function(l){k.Selected.includes(l)||(k.Selected=k.Selected.concat(l))}));e&&("string"===typeof e?k.Skips=[e]:e.length&&(k.Skips=e));r(a,g);E();F();A();u();f("init");return k}(b,d)};}).call(this);
